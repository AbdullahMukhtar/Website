---
export type FAQItem = {
  question: string;
  answer: string;
};

export type Props = {
  items: FAQItem[];
  title?: string;
  id?: string;
};

const { items, title = 'Frequently Asked Questions', id = 'faq' } = Astro.props;

// Schema.org FAQPage
const faqSchema = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: items.map((item) => ({
    '@type': 'Question',
    name: item.question,
    acceptedAnswer: {
      '@type': 'Answer',
      text: item.answer
    }
  }))
};
---

<section id={id} class="mt-16">
  <h2 class="text-3xl font-extrabold tracking-tight text-slate-900 sm:text-4xl">
    {title}
  </h2>
  <div class="mt-8 space-y-4">
    {
      items.map((item, index) => (
        <details class="group rounded-2xl border border-slate-200 bg-white p-6 transition hover:border-brand-200">
          <summary class="cursor-pointer list-none text-lg font-bold text-slate-900 transition group-open:text-brand-700">
            <div class="flex items-start justify-between gap-4">
              <span>{item.question}</span>
              <span class="text-brand-600 transition group-open:rotate-180" aria-hidden="true">
                â–¼
              </span>
            </div>
          </summary>
          <div class="mt-4 text-slate-600" set:html={item.answer} />
        </details>
      ))
    }
  </div>
</section>

<script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />


